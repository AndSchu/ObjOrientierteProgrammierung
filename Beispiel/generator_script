import bpy
import sys
import csv
from random import randint
from mathutils import Vector, Quaternion


def makeMaterial(name, diffuse, specular, alpha):
    mat = bpy.data.materials.new(name)
    mat.diffuse_color = diffuse
    mat.diffuse_shader = 'LAMBERT' 
    mat.diffuse_intensity = 1.0 
    mat.specular_color = specular
    mat.specular_shader = 'COOKTORR'
    mat.specular_intensity = 0.5
    mat.alpha = alpha
    mat.ambient = 1
    return mat
 
def setMaterial(ob, mat):
    me = ob.data
    me.materials.append(mat)


red = makeMaterial('Red', (1,0,0), (1,1,1), 1)
blue = makeMaterial('BlueSemi', (0,0,1), (0.5,0.5,0), 0.5)


with open('input.txt', 'r') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=',', quotechar='|')
    x = 0
    y = 0 
    for row in spamreader:
        x = x + 2
        for data in row:
            y = y + 2
            if data == "X":
                bpy.ops.mesh.primitive_cube_add(radius=1, view_align=False, enter_editmode=False, location=(x, y, 0), layers=(True, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False))
                setMaterial(bpy.context.object, red)
            elif data == " ":
                bpy.ops.mesh.primitive_plane_add(radius=1, view_align=False, enter_editmode=False, location=(x, y, -1), layers=(True, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False, False))
                setMaterial(bpy.context.object, blue)
        y = 0
